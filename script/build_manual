#!/bin/bash
docker build -t emacs_docs ./doc
for file in $(ls ./doc | grep "\.org$"); do
    echo "Building ${file} ..."
    docker run -it --rm -v "`pwd`:/workspace" emacs_docs emacs --batch --load doc/elisp/init.el doc/$file -f org-html-export-to-html
done
mkdir -p ./reports/manual
mv -f ./doc/*.html ./reports/manual/
cp -rf ./doc/css ./doc/fonts ./doc/images ./doc/js ./reports/manual/
